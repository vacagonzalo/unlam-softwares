\documentclass[
    11pt,
    spanish,
    a4paper
]{article}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}
\usepackage{authoraftertitle}
\usepackage{booktabs}
\usepackage{caption}
\usepackage{float}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{verbatim}

\def\doctype{INFORME DE INVESTIGACIÓN}
\title{Softwares de simulación para Tecnología electrónica y otras cátedras de ingeniería}
\author{Gonzalo Nahuel Vaca}

\begin{document}

\makeatletter
\begin{titlepage}
	\begin{center}
		\vspace*{1cm}

		\Huge
		\textbf{\doctype}
		\vspace{0.5cm}

		\LARGE
		\@title
		\vspace{0.5cm}

		\textbf{Compatibilidad electromagnética}

		\vspace{1.5cm}

		\textbf{\@author}

		\vspace{1.5cm}

		\includegraphics[width=0.4\textwidth]{img/logoUNLaM.png}

		\vfill
		Universidad Nacional de la Matanza\\
		Argentina\\
		\today
	\end{center}
\end{titlepage}
\makeatother
\newpage

\section*{Resumen}

Este informe es una memoria breve del trabajo realizado durante el año 2022.
En el marco de la investigación se evaluaron distintos programas para el análisis de compatibilidad electromagnética.

\section{Compatibilidad electromagnética}

Esta sección es una introducción a la temática que abordan los programas evaluados; su naturaliza e importancia.

% temática

El diseño de circuitos electrónicos que manejan señales de alta frecuencia se someten a efectos no deseados.
Esto se debe a que las trazas del impreso son fuentes de radiación electromagnética.
Luego, se inducen corrientes en las pistas cercanas que pueden alterar o destruir parte del sistema.
Además, las ecuaciones que rigen el comportamiento de la radiación en el circuito impreso son de gran complejidad.

Es posible construir guías de onda en un circuito impreso, como así también filtros y blindajes.
También es posible dibujar adaptadores de impedancia para conectar una antena.
En la figura \ref{fig:pcb} se puede observar un ejemplo de un circuito que implementa estos componentes como parte de sus trazas.

\begin{figure}[htbp]
	\centering
	\includegraphics[width=0.8\textwidth]{img/pcb.jpg}
	\caption{Guías de ondas, filtros, adaptadores y blindajes impresos.}
	\label{fig:pcb}
\end{figure}

Los componentes modernos tienen un alto grado de integración y a menudo manejan señales de alta frecuencia.
Los encapsulados tienen un gran número de terminales que en algunos casos obligan a crear un circuito impreso donde las pistas de alta frecuencia se encuentran en proximidad.
En la figura \ref{fig:fpga} se puede ver una \emph{field-programable gate array} (FPGA) y se puede apreciar la cercanía de sus terminales.
Además, este tipo de componente se suele utilizar en una cadena de procesamiento de datos de alta frecuencia.
Finalmente, se pone de manifiesto la necesidad de utilizar una herramienta informática para asistir en el cálculo y simulación de la física involucrada.

\begin{figure}[htbp]
	\centering
	\includegraphics[width=0.6\textwidth]{img/fpga.jpg}
	\caption{Componente de alto grado de integración.}
	\label{fig:fpga}
\end{figure}

Los programas evaluados utilizan el método de elementos finitos (FEM). El cuál permite resolver numéricamente ecuaciones diferenciales que de la geometría del circuito y de las señales que lo estimulan.
Esta estrategia se utiliza en distintos tipos de simulación como: análisis estructural, transferencia de calor, flujo de fluidos, transporte de masa y potencial electromagnético.

El FEM es un método numérico general para resolver ecuaciones diferenciales parciales en dos o tres variables espaciales (es decir, algunos problemas de valores en la frontera).
Para resolver un problema, el FEM subdivide un sistema grande en partes más pequeñas y simples que se denominan elementos finitos.
Esto se logra mediante una discretización espacial particular en las dimensiones del espacio, que se implementa mediante la construcción de una malla del objeto: el dominio numérico para la solución, que tiene un número finito de puntos.
La formulación del método de elementos finitos de un problema de valores en la frontera finalmente da como resultado un sistema de ecuaciones algebraicas.
El método aproxima la función desconocida sobre el dominio.
Las ecuaciones simples que modelan estos elementos finitos se ensamblan luego en un sistema de ecuaciones más grande que modela todo el problema.
Luego, el FEM aproxima una solución minimizando una función de error asociada a través del cálculo de variaciones.

En la figura \ref{fig:simulacion_ejemplo} se puede observar el resultado de una simulación por el método FEM.

\begin{figure}[htbp]
	\centering
	\includegraphics[width=0.8\textwidth]{img/simulacion_1_01.jpg}
	\caption{Simulación de un circuito impreso.}
	\label{fig:simulacion_ejemplo}
\end{figure}

\newpage

\section{OpenEMS}

El programa OpenEMS fue escrito en el lenguaje C++ y utiliza el método de las diferencias finitas en el dominio temporal (FDTD) para resolver simulaciones electromagnéticas.

El programa fue pensado originalmente para realizar simulaciones de equipos médicos de resonancia magnética (MRI).
Sin embargo, se desarrolló un analizador léxico que permite transformar el formato \emph{Hyperlynx} que utiliza KiCad al esquema de geometría de OpenEMS.

El modelo geométrico de OpenEMS es \emph{CSXCAD} y es una biblioteca propia del programa.
Además, permite su visualización y trabajo en coordenadas cartesianas y cilíndricas.
Finalmente, provee una interfaz para Matlab/Octave y Python.

Las características más relevantes son:

\begin{itemize}
	\item Diseño y simulación en coordenadas cartesianas.
	\item Diseño y simulación en coordenadas cilíndricas.
	\item Soporta modelos \emph{voxel} para simulaciones MRI.
	\item Multi-hilos y SIMD.
	\item Intefaz Matlab/Octave.
	\item Definición de materiales en el espacio.
	\item Definición de excitaciones en el espacio.
	\item Generación de archivos en formato \emph{vtk} y \emph{hdf5}
	\item Materiales dispersivos(Drude/Lorentz/Debye)
	\item Rutinas de post-procesamiento configurables (Matlab/Octave).
	\item Sub-espacios de simulación para optimizar densidades de cálculo.
	\item Simulaciones remotas por medio de \emph{ssh}.
	\item Es libre y gratuito.
\end{itemize}

Se creó un entorno de trabajo en Ubuntu 2020 y en contenedores de \emph{docker} para las versiones de Ubuntu 2018 y 2016.
Además se estudió como utilizarlo con Octave y se obtuvieron los siguientes resultados:

\begin{itemize}
	\item El analizador léxico se encuentra abandonado y no es posible hacerlo funcionar
	\item KiCad 6 cambió su formato \emph{Hyperlynx} y el analizador léxico es por lo tanto obsoleto.
	\item Las geometrías de los circuitos impresos se deben construir a mano.
	\item Los errores de geometría no son útiles para depurar los datos ingresados.
\end{itemize}

Dado el estado actual de este programa se hace imposible utilizarlo como herramienta de las cátedras si antes no se repara y actualiza el analizador léxico.

En la figura \ref{fig:openems} se puede observar una simulación realizada en OpenEMS.

\begin{figure}[htbp]
	\centering
	\includegraphics[width=0.7\textwidth]{img/openems.jpeg}
	\caption{Simulación una antena en OpenEMS.}
	\label{fig:openems}
\end{figure}

\newpage

\section{Ansys}

Ansys HFSS (simulador de estructura de alta frecuencia) es un solucionador comercial de métodos de elementos finitos para estructuras electromagnéticas (EM) de Ansys que ofrece varias tecnologías de resolución de última generación.
Cada solucionador en ANSYS HFSS es un procesador de solución automatizado para el cual el usuario dicta la geometría, las propiedades del material y el rango requerido de frecuencias de solución.

Los ingenieros utilizan Ansys HFSS principalmente para diseñar y simular componentes electrónicos de alta velocidad y alta frecuencia en sistemas de radar, sistemas de comunicación, satélites, ADAS, microchips, placas de circuito impreso, productos IoT y otros dispositivos digitales y dispositivos RF.
El solucionador también se ha utilizado para simular el comportamiento electromagnético de objetos como automóviles y aviones.
ANSYS HFSS permite a los diseñadores de sistemas y circuitos simular problemas de EM, como pérdidas por atenuación, acoplamiento, radiación y reflexión.

HFSS captura y simula objetos en 3D, teniendo en cuenta la composición de los materiales y las formas/geometrías de cada objeto.
Además, está preparada para ser utilizadas en el diseño de antenas y elementos complejos de circuitos electrónicos de radiofrecuencia, incluidos filtros, líneas de transmisión y empaques.

Durante el transcurso del 2022 se logró un contacto comercial que realizó una propuesta de trabajo a la UNLaM a cambio de licencias y capacitación.
Se dió una capacitación sobre la funcionalidad y sinergia entre los distintos motores de físicas.

\begin{figure}[htbp]
	\centering
	\includegraphics[width=0.8\textwidth]{img/ansys.jpg}
	\caption{Simulación de PCB flexible en Ansys.}
	\label{fig:ansys}
\end{figure}

\newpage

\section{Elmer}

Elmer es un software de simulación multi-física de código abierto desarrollado principalmente por \emph{IT Center for Science} (CSC).
El desarrollo de Elmer se inició como una colaboración nacional con las universidades finlandesas, los institutos de investigación y la industria.

Elmer incluye modelos físicos de dinámica de fluidos, mecánica estructural, electromagnetismo, transferencia de calor y acústica.
Estos se describen mediante ecuaciones diferenciales parciales que Elmer resuelve mediante el método de elementos finitos (FEM).
Elmer admite computación paralela.

Actualmente los campos de uso más destacados son la glaciología computacional y el electromagnetismo computacional.

\begin{figure}[htbp]
	\centering
	\includegraphics[width=0.8\textwidth]{img/elmer.jpg}
	\caption{Simulación en Elmer.}
	\label{fig:elmer}
\end{figure}

\newpage

\section{Conclusiones}

\begin{itemize}
	\item OpenEMS: el programa no logró cumplir las expectativas y no se ajusta a las necesidades académicas. No se recomienda para su uso ni continuar su investigación.
	\item Ansys: a pesar que el programa es propietario y demandaría un costo económico para la universidad, se ajusta a las necesidades académicas. Se recomienda continuar con su investigación.
	\item Elmer: se debe comenzar su investigación. Esto significa comenzar con sus pruebas de simulación y flujo de trabajo.
\end{itemize}

\end{document}
